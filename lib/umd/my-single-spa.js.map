{"version":3,"file":"my-single-spa.js","sources":["../../src/application/apps.js"],"sourcesContent":["import { NOT_LOADED } from \"./app.helper\";\n\nconst APPS = [];\n/**\n * 注册app\n * @param {string} appName 要注册的app名称\n * @param {Function<Promise> | Object} applicationOrLoadFunction app异步加载函数或者app内容\n * @param {Function<boolean>} activityWhen 判断app应该在何时被启动\n * @param {Object} customProps 自定义配置\n */\nexport function registerApplication(appName, applicationOrLoadFunction, activityWhen, customProps = {}) {\n  // 参数判断\n  if (!appName || typeof appName !== \"string\") {\n    throw new Error(\"the app name must be a non-empty string\");\n  }\n  if (getAppNames().indexOf(appName) !== -1) {\n    throw new Error(\"There is already an app declared with name \" + appName);\n  }\n  if (typeof customProps !== \"object\" || Array.isArray(customProps)) {\n    throw new Error(\"the customProps must be a pure object\");\n  }\n\n  if (!applicationOrLoadFunction) {\n    throw new Error(\"the application or load function is required\");\n  }\n\n  if (typeof activityWhen !== \"function\") {\n    throw new Error(\"the activityWhen must be a function\");\n  }\n\n  // 如果 applicationOrLoadFunction 不是函数（即对象），转成函数\n  if (typeof applicationOrLoadFunction !== \"function\") {\n    applicationOrLoadFunction = () => Promise.resolve(applicationOrLoadFunction);\n  }\n\n  APPS.push({\n    name: appName,\n    loadApp: applicationOrLoadFunction,\n    activityWhen,\n    customProps,\n    status: NOT_LOADED,\n    services: {},\n  });\n}\n"],"names":["registerApplication","appName","applicationOrLoadFunction","activityWhen","customProps","Error","getAppNames","indexOf","Array","isArray","Promise","resolve"],"mappings":";;;;;;EAGA;;;;;;;;EAOO,SAASA,mBAAT,CAA6BC,OAA7B,EAAsCC,yBAAtC,EAAiEC,YAAjE,EAA+EC,WAAW,GAAG,EAA7F,EAAiG;EACtG;EACA,MAAI,CAACH,OAAD,IAAY,OAAOA,OAAP,KAAmB,QAAnC,EAA6C;EAC3C,UAAM,IAAII,KAAJ,CAAU,yCAAV,CAAN;EACD;;EACD,MAAIC,WAAW,GAAGC,OAAd,CAAsBN,OAAtB,MAAmC,CAAC,CAAxC,EAA2C;EACzC,UAAM,IAAII,KAAJ,CAAU,gDAAgDJ,OAA1D,CAAN;EACD;;EACD,MAAI,OAAOG,WAAP,KAAuB,QAAvB,IAAmCI,KAAK,CAACC,OAAN,CAAcL,WAAd,CAAvC,EAAmE;EACjE,UAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;EACD;;EAED,MAAI,CAACH,yBAAL,EAAgC;EAC9B,UAAM,IAAIG,KAAJ,CAAU,8CAAV,CAAN;EACD;;EAED,MAAI,OAAOF,YAAP,KAAwB,UAA5B,EAAwC;EACtC,UAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;EACD,GAlBqG;;;EAqBtG,MAAI,OAAOH,yBAAP,KAAqC,UAAzC,EAAqD;EACnDA,IAAAA,yBAAyB,GAAG,MAAMQ,OAAO,CAACC,OAAR,CAAgBT,yBAAhB,CAAlC;EACD;EAUF;;;;;;;;;;;;"}